<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>éæ»¿ç‰ˆéŸ¿æ‡‰å¼è¼ªæ’­åœ–èˆ‡å°èˆªæ¬„</title>
    <!-- è¼‰å…¥ Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* ç¢ºä¿è¼ªæ’­å€åŸŸéš±è—è¶…å‡ºç¯„åœçš„å…§å®¹ */
      .carousel-track {
        display: flex;
        transition: transform 0.5s ease-in-out;
      }
      .slide {
        flex: 0 0 100%; /* æ¯å€‹æ»‘å¡Šä½”æ“š 100% å¯¬åº¦ */
        min-width: 100%;
        height: auto;
        overflow: hidden;
      }
      .dot {
        transition: background-color 0.3s;
      }
      .dot.active {
        background-color: #059669; /* teal-600: é…åˆ header ä¸»è‰²èª¿ */
      }
      /* è‡ªå®šç¾© active å°èˆªé€£çµçš„æ¨£å¼ï¼Œä½¿ç”¨ Tailwind class è™•ç† */
      /* py-5 ç”¨æ–¼ç¢ºä¿åœ¨ h-20 çš„ header ä¸­å‚ç›´å±…ä¸­ */
      .nav-link {
        @apply text-gray-700 hover:text-teal-600 transition duration-150 py-5;
      }
      .nav-link.active {
        @apply text-teal-700 font-bold border-b-3 border-teal-600;
        border-bottom-width: 3px; /* ç¨å¾®åŠ ç²—åº•éƒ¨ç·š */
      }
      .mobile-menu-link {
        @apply block px-3 py-3 text-base font-medium text-gray-700 hover:bg-teal-50 hover:text-teal-600 rounded-md;
      }
      .mobile-menu-link.active {
        @apply bg-teal-100 text-teal-700;
      }

      /* ç‚ºäº†ç¢ºä¿ max-h-screen å‹•ç•«æ•ˆæœï¼Œæˆ‘å€‘éœ€è¦æ‰‹å‹•è¨­å®šä¸€äº›éæ¸¡å±¬æ€§ */
      #mobile-menu {
        transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out;
      }
      .serv-svg {
        width: 100%;
      }
    </style>
  </head>
  <body class="bg-gray-100 font-sans">
    <!-- éŸ¿æ‡‰å¼ Header å°èˆªæ¬„ -->
    <div id="header-wrapper" class="origin-top w-full">
      <div id="header-placeholder"></div>
    </div>
    <!-- é ‚éƒ¨æ¨™é¡Œå€åŸŸ -->
    <section class="bg-teal-600 pt-16 pb-12">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-5xl font-extrabold text-white mb-4">å°ˆæ¥­é ­çš®ç†ç™‚æ–¹æ¡ˆ</h1>
        <p class="text-xl text-teal-200">å¾æ ¹æºè§£æ±ºå•é¡Œï¼Œé‡ç¾é«®çµ²èˆ‡é ­çš®çš„å¥åº·æ´»åŠ›ã€‚</p>
      </div>
    </section>

    <div class="gtco-container">
        <div class="row">
          <div class="filter-buttons animate-box">
            <button class="active animate-box" data-type="men">Men's</button>
            <button data-type="ladie">Ladie's</button>
            <button data-type="other">Other</button>
          </div>

          <div class="image-container" id="imageContainer"></div>
          <div class="loading" id="loading">è¼‰å…¥ä¸­...</div>
        </div>
      </div>
    </div>

    <div id="footer-placeholder"></div>

    <!-- é è…³ (Footer) å€å¡Š -->

    <script>
      // ---------------------------------------------
      // è¡Œå‹•è£ç½®èœå–® (Header JS) - å·²æ›´æ–°ç‚º Max-Height å‹•ç•«
      // ---------------------------------------------
      const mobileMenuButton = document.getElementById('mobile-menu-button')
      const mobileMenu = document.getElementById('mobile-menu')
      const menuIcon = document.getElementById('menu-icon')
      const closeIcon = document.getElementById('close-icon')

      // ---------------------------------------------
      // è¼ªæ’­åœ–é‚è¼¯ (Carousel JS)
      // ---------------------------------------------
      const track = document.getElementById('carouselTrack')
      const slides = Array.from(track.children)
      const nextButton = document.getElementById('nextBtn')
      const prevButton = document.getElementById('prevBtn')
      const dotsContainer = document.getElementById('dotsContainer')
      const slideCount = slides.length
      let currentSlideIndex = 0

      // 1. å°èˆªåœ“é»ç”Ÿæˆ
      const generateDots = () => {
        for (let i = 0; i < slideCount; i++) {
          const dot = document.createElement('button')
          // ä½¿ç”¨ teal-500 ä½œç‚º active é¡è‰²ï¼Œèˆ‡ Header ä¸»è‰²èª¿ä¸€è‡´
          dot.classList.add(
            'dot',
            'h-3',
            'w-3',
            'rounded-full',
            'bg-gray-300',
            'hover:bg-teal-400',
            'focus:outline-none'
          )
          dot.setAttribute('data-index', i)
          dot.addEventListener('click', () => moveToSlide(i))
          dotsContainer.appendChild(dot)
        }
      }

      // 2. æ ¸å¿ƒæ»‘å‹•é‚è¼¯
      const updateCarousel = () => {
        const amountToMove = -currentSlideIndex * 100
        track.style.transform = `translateX(${amountToMove}%)`

        // æ›´æ–°åœ“é»ç‹€æ…‹
        Array.from(dotsContainer.children).forEach((dot, index) => {
          dot.classList.remove('active', 'bg-teal-600')
          dot.classList.add('bg-gray-300')
          if (index === currentSlideIndex) {
            dot.classList.add('active', 'bg-teal-600')
            dot.classList.remove('bg-gray-300')
          }
        })
      }

      const moveToSlide = (index) => {
        currentSlideIndex = index
        updateCarousel()
      }

      const moveNext = () => {
        currentSlideIndex = (currentSlideIndex + 1) % slideCount
        updateCarousel()
      }

      const movePrev = () => {
        currentSlideIndex = (currentSlideIndex - 1 + slideCount) % slideCount
        updateCarousel()
      }

      // 3. äº‹ä»¶ç›£è½
      nextButton.addEventListener('click', moveNext)
      prevButton.addEventListener('click', movePrev)

      // 4. åˆå§‹åŒ–
      window.onload = () => {
        generateDots()
        updateCarousel() // è¨­ç½®åˆå§‹ç‹€æ…‹

        // è¨­å®šç‰ˆæ¬Šå¹´ä»½
        document.getElementById('current-year').textContent = new Date().getFullYear()
      }
    </script>
    <script>
      function scaleHeader() {
        const wrapper = document.getElementById('header-wrapper')
        const screenWidth = window.innerWidth
        const minWidth = 360 // 360 ä»¥ä¸‹é–‹å§‹ç¸®æ”¾

        if (screenWidth < minWidth) {
          const scale = screenWidth / minWidth
          wrapper.style.transform = `scale(${scale})`
        } else {
          wrapper.style.transform = 'scale(1)'
        }
      }

      window.addEventListener('resize', scaleHeader)
      window.addEventListener('load', scaleHeader)
    </script>
    <script>
       async function loadNav() {
        const headerContainer = document.getElementById('header-placeholder')
        const header = await fetch('./header.html')
        const headerhtml = await header.text()
        headerContainer.innerHTML = headerhtml

        const footerContainer = document.getElementById('footer-placeholder')
        const footer = await fetch('./footer.html')
        const footerhtml = await footer.text()
        footerContainer.innerHTML = footerhtml

        initHamburgerMenu()
        initHeaderVars()
      }
      loadNav()
       function initHeaderVars() {
        window.mobileMenuButton = document.getElementById('mobile-menu-button')
        window.mobileMenu = document.getElementById('mobile-menu')
        window.menuIcon = document.getElementById('menu-icon')
        window.closeIcon = document.getElementById('close-icon')

        console.log('Header DOM ç¶å®šå®Œç•¢')
      }

      // æ¼¢å ¡é¸å–®åŠŸèƒ½ï¼šå‹•ç•« + é–‹åˆ
      function initHamburgerMenu() {
        const btn = document.getElementById('mobile-menu-button')
        const menu = document.getElementById('mobile-menu')
        const menuIcon = document.getElementById('menu-icon')
        const closeIcon = document.getElementById('close-icon')

        if (!btn || !menu) {
          console.warn('Header å°šæœªè¼‰å…¥å®Œæˆï¼Œæˆ–æŒ‰éˆ•æ‰¾ä¸åˆ°ã€‚')
          return
        }

        btn.addEventListener('click', () => {
          const isOpen = !menu.classList.contains('max-h-0')

          if (isOpen) {
            // é—œé–‰
            menu.classList.replace('max-h-96', 'max-h-0')
            menu.classList.replace('opacity-100', 'opacity-0')

            menuIcon.classList.remove('hidden')
            closeIcon.classList.add('hidden')
          } else {
            // æ‰“é–‹
            menu.classList.replace('max-h-0', 'max-h-96')
            menu.classList.replace('opacity-0', 'opacity-100')

            menuIcon.classList.add('hidden')
            closeIcon.classList.remove('hidden')
          }
        })
      }
    </script>
    <script>
      const container = document.getElementById('imageContainer')
      const loading = document.getElementById('loading')
      const buttons = document.querySelectorAll('.filter-buttons button')

      let currentType = 'men'
      let page = 1
      let isLoading = false

      // è¨­å®šæ¯é¡å‹çš„ç¸½åœ–ç‰‡æ•¸é‡
      const imageData = {
        men: 100,
        ladie: 100,
        other: 100,
      }
      const imagesPerPage = 5

      // æ‡¶åŠ è¼‰è§€å¯Ÿå™¨
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const img = entry.target
            img.src = img.dataset.src
            observer.unobserve(img)
          }
        })
      })

      // ä¸»è¦è¼‰å…¥å‡½å¼
      function loadImages() {
        if (isLoading) return
        isLoading = true
        loading.style.display = 'block'

        setTimeout(() => {
          const totalImages = imageData[currentType]
          const start = (page - 1) * imagesPerPage + 1
          const end = Math.min(start + imagesPerPage - 1, totalImages)

          for (let i = start; i <= end; i++) {
            const img = document.createElement('img')
            img.dataset.src = `portfolio/${currentType}${i}.jpg` // e.g. image/short1.jpg
            img.onload = () => img.classList.add('loaded')
            observer.observe(img)
            container.appendChild(img)
          }

          page++
          isLoading = false
          loading.style.display = 'none'

          if (end >= totalImages) {
            loading.textContent = 'ğŸ‰ è©²åˆ†é¡å·²å…¨éƒ¨è¼‰å…¥å®Œç•¢'
            window.removeEventListener('scroll', handleScroll)
          }
        }, 600)
      }

      function handleScroll() {
        if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 150) {
          loadImages()
        }
      }

      // åˆ‡æ›åˆ†é¡
      buttons.forEach((btn) => {
        btn.addEventListener('click', () => {
          buttons.forEach((b) => b.classList.remove('active'))
          btn.classList.add('active')
          currentType = btn.dataset.type
          page = 1
          container.innerHTML = ''
          loading.textContent = 'è¼‰å…¥ä¸­...'
          window.addEventListener('scroll', handleScroll)
          loadImages()
        })
      })

      // åˆå§‹è¼‰å…¥
      window.addEventListener('scroll', handleScroll)
      loadImages()
    </script>
    <style>
      h1 {
        text-align: center;
        padding: 20px 0 10px;
        color: #333;
        letter-spacing: 1px;
      }

      /* --- åˆ†é¡æŒ‰éˆ•å€ --- */
      .filter-buttons {
        text-align: center;
        margin-bottom: 10px;
      }

      .filter-buttons button {
        margin: 6px;
        padding: 8px 16px;
        font-size: 16px;
        border: none;
        border-radius: 20px;
        background-color: #ddd;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .filter-buttons button.active {
        background-color: #333;
        color: white;
      }

      .filter-buttons button:hover {
        background-color: #666;
        color: white;
      }

      /* --- åœ–ç‰‡å€ --- */
      .image-container {
        column-count: 4;
        column-gap: 12px;
        padding: 12px;
      }

      .image-container img {
        width: 100%;
        margin-bottom: 12px;
        border-radius: 10px;
        background: #e0e0e0;
        opacity: 0;
        transition: opacity 0.5s ease;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      }

      .image-container img.loaded {
        opacity: 1;
      }

      @media (max-width: 900px) {
        .image-container {
          column-count: 3;
        }
      }

      @media (max-width: 600px) {
        .image-container {
          column-count: 2;
        }
      }

      .loading {
        text-align: center;
        padding: 20px;
        font-size: 16px;
        color: #666;
      }
    </style>
  </body>
</html>
